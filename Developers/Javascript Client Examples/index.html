<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Javascript Client Examples - FS Flight Plan Link</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../css/main.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Javascript Client Examples";
    var mkdocs_page_input_path = "Developers\\Javascript Client Examples.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/yaml.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/rust.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/json.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/html.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> FS Flight Plan Link</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../..">Desktop Software</a>
  </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Developers</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          


  
    
    <li class="navtree toctree-l2 page current">
      <a class="current" href="./">
        Javascript Client Examples
          <span class="toctree-expand"></span>
      </a>
    </li>
    
      



  <li class="toctree-l2 current">
    <ul class="subnav-l2 current">
    
      
          

  <li class="toctree-l3 current with-children">
    <a href="#loading-flight-plan-using-javascript">
      Loading Flight Plan Using JavaScript
      <span class="toctree-expand"></span>
    </a>
  </li>



  <li class="toctree-l3 current">
    <ul class="subnav-l3 current">
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#used-code">Used Code</a>
        </li>
    
      
        <li class="toctree-l4">
          <a class="toctree-l5" href="#result">Result</a>
        </li>
    
    </ul>
  </li>

      
    
      
          

  <li class="toctree-l3">
    <a href="#pulling-data-from-existing-dom-structure">
      Pulling Data from Existing DOM Structure
      <span class="toctree-expand"></span>
    </a>
  </li>



  <li class="toctree-l3">
    <ul class="subnav-l3 toc-hidden">
    
      
          

  <li class="toctree-l4 current with-children">
    <a href="#turkish-virtual-departures-page">
      Turkish Virtual Departures Page
      <span class="toctree-expand"></span>
    </a>
  </li>



  <li class="toctree-l4 current">
    <ul class="subnav-l4 current">
    
      
        <li class="toctree-l5">
          <a class="toctree-l6" href="#used-code_1">Used Code</a>
        </li>
    
      
        <li class="toctree-l5">
          <a class="toctree-l6" href="#example-dom">Example DOM</a>
        </li>
    
      
        <li class="toctree-l5">
          <a class="toctree-l6" href="#result_1">Result</a>
        </li>
    
    </ul>
  </li>

      
    
    </ul>
  </li>

      
    
    </ul>
  </li>


  
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../Javascript Client Referance/">Javascript Client Reference</a>
  </li>
        
          


  <li class="navtree toctree-l2 inactive">
    <a class="" href="../Server API/">Server API Referance</a>
  </li>
        
      </ul>
    </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">FS Flight Plan Link</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Developers &raquo;</li>
        
      
    
    <li>Javascript Client Examples</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <script src='/js/main.js' type='text/javascript'></script>

<h1 id="javascript-client-examples">JavaScript Client Examples<a class="headerlink" href="#javascript-client-examples" title="Permanent link"></a></h1>
<h2 id="loading-flight-plan-using-javascript">Loading Flight Plan Using JavaScript<a class="headerlink" href="#loading-flight-plan-using-javascript" title="Permanent link"></a></h2>
<h4 id="used-code">Used Code<a class="headerlink" href="#used-code" title="Permanent link"></a></h4>
<pre><code class="HTML">&lt;div id='example'&gt;
  &lt;div id='example_button'&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre>

<pre><code>let plan = {
'callsign': 'THYTST',
'departure': 'LTBA',
'destination': 'LTFM',
'route': 'LTBA LTFM'
}

let planOptions = {
    'buttons': [
        {
            to: 'example_button',
            text: 'Load Plan'
        }
    ]
}

let planClient = new fsfpl.Plan(plan, planOptions)
</code></pre>

<h4 id="result">Result<a class="headerlink" href="#result" title="Permanent link"></a></h4>
<div id='example'>
  <div id='example_button'>
  </div>
</div>

<p>Button on this div is automatically generated with given options.</p>
<p>Clicking it will load the flight in the example code.</p>
<script>
  let plan = {
    'callsign': 'THYTST',
    'departure': 'LTBA',
    'destination': 'LTFM',
    'route': 'LTBA LTFM'
  }

  let planOptions = {
    'buttons': [
      {
        to: 'example_button',
        text: 'Load Plan'
      }
    ]
  }

  let planClient = new fsfpl.Plan(plan, planOptions)
  // planClient.send()
</script>

<h2 id="pulling-data-from-existing-dom-structure">Pulling Data from Existing DOM Structure<a class="headerlink" href="#pulling-data-from-existing-dom-structure" title="Permanent link"></a></h2>
<h3 id="turkish-virtual-departures-page">Turkish Virtual Departures Page<a class="headerlink" href="#turkish-virtual-departures-page" title="Permanent link"></a></h3>
<p>Using FSFPLink.collector we can pull data from DOM.</p>
<h4 id="used-code_1">Used Code<a class="headerlink" href="#used-code_1" title="Permanent link"></a></h4>
<pre><code>const link = new fsfpl.FSFPLink()

function collectTv() {
    return new Promise((resolve, reject) =&gt; {
        /*
        * This is the important part. Rest is async mumbo jumbo
        */
        link.collect({
            'route': {
                selector: '#route1',
                attribute: 'innerHTML'
            },
            'flight_code': {
                selector: '#flcode',
                attribute: 'innerHTML'
            },
            'departure': {
                selector: '#departure',
                attribute: 'innerHTML'
            },
            'destination': {
                selector: '#destination',
                attribute: 'innerHTML'
            },
            'alternate': {
                selector: '#alternate',
                attribute: 'innerHTML'
            },
            'callsign': {
                selector: '#callsign',
                attribute: 'innerHTML'
            },
            'block_time': {
                selector: '#time',
                attribute: 'innerHTML'
            },
            'aircraft': {
                selector: 'input[name=&quot;aircraft&quot;]:checked',
                attribute: 'value'
            },
            'cruise_altitude': {
                selector: 'input[name=&quot;cruise-altitude&quot;]:checked',
                attribute: 'value'
            }
        }).then(result =&gt; {
            document.getElementById('test-1-result').innerHTML = JSON.stringify(result, null, 2)
            console.log(result)
            resolve(result)
            /*
            * We would normally call 'send' here with result.
            * link.send(result)
            *
            * I am returning a promise instead for example purposes.
            */
        })
        /*
        * End of async mumbo jumbo
        */
    })
}

function sendTv(caller) {
    let options = {
        caller: caller
    }
    collectTv().then(result =&gt; {
        link.send(result, options)
    })
}
</code></pre>

<h4 id="example-dom">Example DOM<a class="headerlink" href="#example-dom" title="Permanent link"></a></h4>
<p>Following HTML example is a copy of Turkish Virtual's Departure Page. </p>
<table class="grid" align="center"

<center><b><label id="tanitim" style="color:Black; font-size:large" visible=true><center>Turkish Virtual Dispatch Service</center></label></b></center>
</table>

<table class="grid">
<tr class="foot">
<td colspan="3" class="alnc bdrr clrr fntb" id="caption">
LTFM - ISTANBUL NEW AIRPORT / UKDE - MOKRAYA
</td>
</tr>
</table>

<table class="grid" >
<tr class="alnc clrr fntb" id="mettaf"><td>METAR and TAF Information</td></tr>
</table>

<table class="grid">
<tr class="capt bdrs"><td colspan="2"><center>Departure : <a id='departure' href="http://www.turkishvirtual.com/airports.asp?code=LTFM">LTFM</a> - ISTANBUL NEW AIRPORT (Click to see airport details)</center></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">METAR</td><td><div id="metar1">LTFM 142050Z 24010KT 9999 SCT035 BKN100 17/05 Q1012 NOSIG</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">TAF</td><td><div id="taf1">No TAF available for LTFM.</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b>Please check PILOT CENTRE for <a class="link" href="http://www.turkishvirtual.com/charts.asp">Charts</a> and <a class="link" href="http://www.turkishvirtual.com/scenerys.asp">Sceneries</a><br/></b></center></td></tr>
</table>

<table class="grid">
<tr class="capt bdrs"><td colspan="2"><center>Destination : <a id='destination' href="http://www.turkishvirtual.com/airports.asp?code=UKDE">UKDE</a> - MOKRAYA (Click to see airport details)</center></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg w64">METAR</td><td><div id="metar2">UKDE 141500Z 16006MPS 120V210 CAVOK 17/M00 Q1006 R20L/090070 NOSIG</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">TAF</td><td><div id="taf2">2019/12/20 16:09
TAF 
      AMD TAF 
      AMD UKDE 201606Z 2016/2124 09003MPS 0100 FZFG VV001 TXM01/2016Z TNM03/2124Z 
      TEMPO 2018/2021 1000 BR OVC003
</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b>Please check PILOT CENTRE for <a class="link" href="http://www.turkishvirtual.com/charts.asp">Charts</a> and <a class="link" href="http://www.turkishvirtual.com/scenerys.asp">Sceneries</a><br/></b></center></td></tr>
</table>

<table class="grid">
<tr class="capt bdrs"><td colspan="2"><center>Alternate : <a id="alternate" href="http://www.turkishvirtual.com/airports.asp?code=UKOH">UKOH</a> - KHERSON INTL (Click to see airport details)</center></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">METAR</td><td><div id="metar3"></div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">TAF</td><td><div id="taf3">No TAF available for UKOH.</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b>Please check PILOT CENTRE for <a class="link" href="http://www.turkishvirtual.com/charts.asp">Charts</a> and <a class="link" href="http://www.turkishvirtual.com/scenerys.asp">Sceneries</a><br/></b></center></td></tr>
</table>

<p><br></p>
<table class="grid" >
<tr class="alnc clrr fntb" id="mettaf"><td>ROUTE INFORMATION</td></tr>
</table>

<table class="grid" >
<tr class="seq1"><td class="alnr fntb clrr bckg" width="80">Route 1 :</td><td><div id="route1">MAKOL N617 OSDOR L743 KOSAK Y179 RAPUL L140 KH N604 DITIX</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b></b></center></td></tr>
</table>

<table class="grid" style="table-layout:fixed; width:620px">
<tr class="seq1"><td class="alnr fntb clrr bckg" width="80">Route 2 :</td><td style="word-break:break-all"><div id="route2">Not Available</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b></b></center></td></tr>
</table>

<div class='tab'><ul><li class='current'><a class="t"><span>Route of The Destination</span></a></li><li><span class='remark'>Turkish Virtual &bull; Information Services</span></li></ul></div>

<table class="grid">
<tr><td style="padding:0px;">
</td></tr>
</table>

<p><a>
<img src="https://turkishvirtual.com/img/Turkish_a.png" width="620" height="40"></img>
</a>
<div class='tab'><ul><li><span class='remark'> </span></li></ul></div>
</br></p>
<p><center><img src="http://turkishvirtual.com/img/schflight.jpg" width="620" height="161"></img></center><br>
<center>(This is a Scheduled Flight)</center></p>
<table class="grid" >
<tr class="alnc clrr fntb" id="othinf"><td>OTHER INFORMATION</td></tr>
</table>

<table class="grid">
<tr class="seq1"><td class="alnr fntb clrr bckg" width="80">Flight Code</td><td><div id="flcode">THY 1469</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Callsign</td><td><div id="callsign">THY 2RD</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Aircraft</td><td><div id="acs">
<div class="radio-toolbar">
    <input type="radio" id="aircraft_a319" name="aircraft" value="A319" checked>
    <label for="aircraft_a319">A319</label>
    <input type="radio" id="aircraft_a320" name="aircraft" value="A320">
    <label for="aircraft_a320">A320</label>
</div>

</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg" width="80">Flight Levels</td><td><div id="flvls">
<div class="radio-toolbar">
    <input type="radio" id="fl_1" name="cruise-altitude" value="33000" checked>
    <label for="fl_1">FL330</label>
    <input type="radio" id="fl_2" name="cruise-altitude" value="35000">
    <label for="fl_2">FL350</label>
</div>
</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Distance</td><td><div id="distance">498 nm</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Flight Time</td><td><div id="time">1:40</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Flight Type</td><td><div id="fty">International Flight</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Ticket Price</td><td><div id="fty">1400</div></td></tr>
<tr class="seq1"><td class="alnr fntb clrr bckg">Departure Time</td><td><div id="fty">1140 (z)</div></td></tr>
<tr class="foot"><td class="clrg" colspan="2"><center><b>Please check PILOT CENTRE for <a class="link" href="http://www.turkishvirtual.com/charts.asp">Charts</a> and <a class="link" href="http://www.turkishvirtual.com/scenerys.asp">Sceneries</a><br/></b></center></td></tr>
</table>

<div class="notes">
<b><i>Not for real aviation !</i></b>
</div>

<p></p>
</td></p>
<!--
ADDED
id field for: departure, destination, alternate
radio select for: aircraft, flight-level (cruise-altitude)
--->

<style>
    .radio-toolbar input[type="radio"] {
        display: none;
    }

    .radio-toolbar label {
        display: inline-block;
        background-color: #ddd;
        padding: 4px 11px;
        font-family: Arial;
        font-size: 16px;
        cursor: pointer;
    }

    .radio-toolbar input[type="radio"]:checked+label {
        background-color: #bbb;
    }
</style>

<h4 id="result_1">Result<a class="headerlink" href="#result_1" title="Permanent link"></a></h4>
<p><div style='border: 1px solid black; min-height: 250px; min-width:100%; white-space: pre;' id='test-1-result'></div>
<button class="btn btn-green" onClick='collectTv()'>Collect</button>
<button class="btn btn-green" onClick='sendTv(this)'>Send</button></p>
<script>
const link = new fsfpl.Utility()

function collectTv() {
    return new Promise((resolve, reject) => {
        /*
        * This is the important part. Rest is async mumbo jumbo
        */
        link.collect({
            'route': {
                selector: '#route1',
                attribute: 'innerHTML'
            },
            'flight_code': {
                selector: '#flcode',
                attribute: 'innerHTML'
            },
            'departure': {
                selector: '#departure',
                attribute: 'innerHTML'
            },
            'destination': {
                selector: '#destination',
                attribute: 'innerHTML'
            },
            'alternate': {
                selector: '#alternate',
                attribute: 'innerHTML'
            },
            'callsign': {
                selector: '#callsign',
                attribute: 'innerHTML'
            },
            'block_time': {
                selector: '#time',
                attribute: 'innerHTML'
            },
            'aircraft': {
                selector: 'input[name="aircraft"]:checked',
                attribute: 'value'
            },
            'cruise_altitude': {
                selector: 'input[name="cruise-altitude"]:checked',
                attribute: 'value'
            }
        }).then(result => {
            document.getElementById('test-1-result').innerHTML = JSON.stringify(result, null, 2)
            console.log(result)
            resolve(result)
            /*
            * We would normally call 'send' here with result.
            * link.send(result)
            *
            * I am returning a promise instead for example purposes.
            */
        })
        /*
        * End of async mumbo jumbo
        */
    })
}

function sendTv(caller) {
    let options = {
        caller: caller
    }
    collectTv().then(result => {
        link.send(result, options)
    })
}
</script>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../Javascript Client Referance/" class="btn btn-neutral float-right" title="Javascript Client Reference">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Desktop Software"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../Javascript Client Referance/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../js/main.js" defer></script>
      <script src="../../api/fsfplink.v1.yaml" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
